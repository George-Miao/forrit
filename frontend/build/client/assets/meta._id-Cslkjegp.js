import{j as t}from"./jsx-runtime-BVzQf6E0.js";import{T as m,m as u,o as g,W as f}from"./width_limit-CngMnDB3.js";import{L as y,a as w}from"./loading_infinite-CfIMpOUb.js";import{S as c,P as _}from"./page_header-p8RXdD20.js";import{c as b,d as L,h as T,i as v,e as D}from"./client-c40QJxix.js";import{E}from"./item-CUH0oaGt.js";import{L as M}from"./loading-dEFtmIfz.js";import{C as $}from"./index-K5r8TNW_.js";import{S as C}from"./subscription-BvSs6UUD.js";import{q as F}from"./components-WhqMYwqP.js";import{j as S}from"./responses-BYym33_R.js";import"./index-Dm89QOQe.js";import"./col-72kQnMqL.js";import"./index-BJsTzASz.js";import"./index-CroKYYni.js";import"./IconDownload-CaETeKSy.js";import"./index-ICOqW_OP.js";import"./IconPlus-Cu70Nnu5.js";const d="(min(max(100dvw * 0.3, 150px), 300px))",{Text:p,Title:x}=u;function k({meta:i,vertical:e,style:n}){e=e??!1;const r=b(),o=i.poster?t.jsx("img",{alt:"backdrop",style:e?void 0:{width:`calc(${d})`,height:`calc(${d} * 1.5)`,borderRadius:"var(--semi-border-radius-medium)"},src:i.poster}):void 0,s=t.jsx(H,{meta:i,style:{minHeight:e?void 0:`calc(${d} * 1.5)`}});return e?t.jsx($,{shadows:"always",cover:o,style:n,children:s}):t.jsxs(c,{align:"start",spacing:r?"medium":"loose",style:n,vertical:e,children:[o,s]})}function H({meta:i,style:e}){const{title:n,year:r,info:o,overview:s,tv:l}=i;return t.jsxs(c,{vertical:!0,align:"start",style:e,children:[t.jsxs(x,{heading:3,style:{verticalAlign:"baseline"},children:[t.jsx(m,{content:l==null?void 0:l.original_name,children:t.jsx("span",{children:n})}),r?t.jsxs(x,{heading:4,type:"tertiary",weight:"light",component:"span",style:{marginLeft:"0.2em"},children:["(",r,")"]}):null]}),t.jsx(p,{type:"tertiary",children:o.map((a,h,j)=>t.jsxs(t.Fragment,{children:[a.tooltip?t.jsx(m,{content:a.tooltip,children:t.jsx("span",{children:a.content})},a.content):t.jsx("span",{children:a.content},a.content),h<j.length-1?t.jsx("span",{style:{margin:"0 .3em"},children:"·"},a.content):null]}))}),s?t.jsx(p,{type:"secondary",ellipsis:{rows:4,expandable:!0},children:s}):null,t.jsx("div",{style:{flex:1,display:"flex",justifyContent:"flex-end",alignItems:"flex-end",width:"100%"},children:t.jsx(C,{show_text:!0,meta_id:i.id,subscription:i.subscription??null})})]})}async function tt({params:i}){return S({id:i.id})}function et(){const i=F().id;return t.jsx(M,{size:"large",useData:()=>L(i),children:e=>t.jsx(I,{meta:e})})}function I({meta:i}){const e=T(),n=t.jsx(k,{vertical:e,meta:i,style:e?{position:"sticky",top:"2rem"}:{paddingBottom:"1em"}}),r=t.jsx(c,{vertical:!0,align:"start",spacing:"loose",style:{width:"100%"},children:t.jsx(y,{style:{width:"100%"},emptyContent:t.jsx(g,{type:"tertiary",style:{display:"block",marginTop:"2rem"},children:"暂无资源"}),children:t.jsx(w,{data:v(i.id),children:o=>t.jsx(t.Fragment,{children:o.map(s=>t.jsx(E,{item:D(s),show_meta:!1},s._id.$oid))})})})});return t.jsxs(t.Fragment,{children:[t.jsx(_,{routes:[{href:"/",name:"首页"},{href:"/meta",name:"番剧"},{name:i.title}],children:!e&&n}),t.jsx(f,{topPadding:e,style:{display:"flex",gap:"2.5rem",paddingLeft:"2rem",maxWidth:"calc(1200px + 4rem)"},children:e?t.jsxs(t.Fragment,{children:[t.jsx("aside",{style:{width:"400px"},children:n}),r]}):r})]})}export{tt as clientLoader,et as default};
