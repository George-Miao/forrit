import{r as O,n as a,g as J}from"./jsx-runtime-BVzQf6E0.js";import{c as W,b3 as Q,b as A,B as R,l as Z,P as n,e as M,k as z,a as f,b4 as ee,b5 as te,E as se,b6 as ne,b7 as oe,V as D,b8 as ie,b9 as re,ba as ae,bb as le,bc as ce,bd as de,be as pe,j as w,R as H,T as he,_ as K,bf as ue}from"./width_limit-CngMnDB3.js";function me(o){return O.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},o),O.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.08045 7.59809C4.66624 7.01231 5.61599 7.01231 6.20177 7.59809L11.8586 13.2549L17.5155 7.59809C18.1013 7.01231 19.051 7.01231 19.6368 7.59809C20.2226 8.18388 20.2226 9.13363 19.6368 9.71941L12.9193 16.4369C12.3335 17.0227 11.3838 17.0227 10.798 16.4369L4.08045 9.71941C3.49467 9.13363 3.49467 8.18388 4.08045 7.59809Z",fill:"currentColor"}))}const Be=W(me,"chevron_down");function fe(o){return O.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},o),O.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.43934 19.7957C6.85355 19.2099 6.85355 18.2601 7.43934 17.6744L13.0962 12.0175L7.43934 6.36065C6.85355 5.77486 6.85355 4.82511 7.43934 4.23933C8.02513 3.65354 8.97487 3.65354 9.56066 4.23933L16.2782 10.9568C16.864 11.5426 16.864 12.4924 16.2782 13.0782L9.56066 19.7957C8.97487 20.3815 8.02513 20.3815 7.43934 19.7957Z",fill:"currentColor"}))}const ze=W(fe,"chevron_right");var ge=Q,X=1/0,be=17976931348623157e292;function ye(o){if(!o)return o===0?o:0;if(o=ge(o),o===X||o===-X){var e=o<0?-1:1;return e*be}return o===o?o:0}var Ie=ye,Ee=Ie;function Te(o){var e=Ee(o),t=e%1;return e===e?t?e-t:e:0}var Ce=Te;class ve extends A{constructor(e){super(Object.assign({},e)),this.updateDOMInRenderTree=t=>{this._adapter.setDOMInRenderTree(t)},this.updateDOMHeight=t=>{this._adapter.setDOMHeight(t)},this.updateVisible=t=>{this._adapter.setVisible(t)},this.updateIsTransitioning=t=>{this._adapter.setIsTransitioning(t)}}}const G={PREFIX:`${R}-collapsible`};class b extends M{constructor(e){super(e),this.domRef=a.createRef(),this.hasBeenRendered=!1,this.handleResize=t=>{const s=t[0];if(s){const i=b.getEntryInfo(s);this.foundation.updateDOMHeight(i.height),this.foundation.updateDOMInRenderTree(i.isShown)}},this.isChildrenInRenderTree=()=>this.domRef.current?this.domRef.current.offsetHeight>0:!1,this.state={domInRenderTree:!1,domHeight:0,visible:this.props.isOpen,isTransitioning:!1},this.foundation=new ve(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setDOMInRenderTree:e=>{this.state.domInRenderTree!==e&&this.setState({domInRenderTree:e})},setDOMHeight:e=>{this.state.domHeight!==e&&this.setState({domHeight:e})},setVisible:e=>{this.state.visible!==e&&this.setState({visible:e})},setIsTransitioning:e=>{this.state.isTransitioning!==e&&this.setState({isTransitioning:e})}})}componentDidMount(){super.componentDidMount(),this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.domRef.current);const e=this.isChildrenInRenderTree();this.foundation.updateDOMInRenderTree(e),e&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight)}componentDidUpdate(e,t,s){const i=Object.keys(this.props).filter(l=>!z(this.props[l],e[l])),r=Object.keys(this.state).filter(l=>!z(this.state[l],t[l]));i.includes("reCalcKey")&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),r.includes("domInRenderTree")&&this.state.domInRenderTree&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),i.includes("isOpen")&&(this.props.isOpen||!this.props.motion)&&this.foundation.updateVisible(this.props.isOpen),this.props.motion&&e.isOpen!==this.props.isOpen&&this.foundation.updateIsTransitioning(!0)}componentWillUnmount(){super.componentWillUnmount(),this.resizeObserver.disconnect()}render(){const e=Object.assign({overflow:"hidden",height:this.props.isOpen?this.state.domHeight:this.props.collapseHeight,opacity:this.props.isOpen||!this.props.fade||this.props.collapseHeight!==0?1:0,transitionDuration:`${this.props.motion&&this.state.isTransitioning?this.props.duration:0}ms`},this.props.style),t=f(`${G.PREFIX}-wrapper`,{[`${G.PREFIX}-transition`]:this.props.motion&&this.state.isTransitioning},this.props.className),s=this.props.keepDOM&&(this.props.lazyRender?this.hasBeenRendered:!0)||this.props.collapseHeight!==0||this.state.visible||this.props.isOpen;return s&&!this.hasBeenRendered&&(this.hasBeenRendered=!0),a.createElement("div",Object.assign({className:t,style:e,onTransitionEnd:()=>{var i,r;this.props.isOpen||this.foundation.updateVisible(!1),this.foundation.updateIsTransitioning(!1),(r=(i=this.props).onMotionEnd)===null||r===void 0||r.call(i)}},this.getDataAttr(this.props)),a.createElement("div",{"x-semi-prop":"children",ref:this.domRef,style:{overflow:"hidden"},id:this.props.id},s&&this.props.children))}}b.__SemiComponentName__="Collapsible";b.defaultProps=Z(b.__SemiComponentName__,{isOpen:!1,duration:250,motion:!0,keepDOM:!1,lazyRender:!1,collapseHeight:0,fade:!1});b.getEntryInfo=o=>{let e;o.borderBoxSize?e=!(o.borderBoxSize[0].blockSize===0&&o.borderBoxSize[0].inlineSize===0):e=!(o.contentRect.height===0&&o.contentRect.width===0);let t=0;return o.borderBoxSize?t=Math.ceil(o.borderBoxSize[0].blockSize):t=o.target.clientHeight,{isShown:e,height:t}};b.propTypes={motion:n.bool,children:n.node,isOpen:n.bool,duration:n.number,keepDOM:n.bool,collapseHeight:n.number,style:n.object,className:n.string,reCalcKey:n.oneOfType([n.string,n.number])};var we=ee,Oe=te,_e=Ce,Ne=9007199254740991,k=4294967295,xe=Math.min;function Re(o,e){if(o=_e(o),o<1||o>Ne)return[];var t=k,s=xe(o,k);e=Oe(e),o-=k;for(var i=we(s,e);++t<o;)e(t);return i}var De=Re;const He=J(De),_={PREFIX:`${R}-dropdown`,SELECTED:`${R}-dropdown-item-selected`,DISABLED:`${R}-dropdown-item-disabled`},S={POSITION_SET:se.POSITION_SET,TRIGGER_SET:["hover","focus","click","custom","contextMenu"],DEFAULT_LEAVE_DELAY:100,ITEM_TYPE:["primary","secondary","tertiary","warning","danger"]},U={SPACING:4,NESTED_SPACING:2};class Me extends A{handleVisibleChange(e){this._adapter.setPopVisible(e),this._adapter.notifyVisibleChange(e);const{trigger:t}=this.getProps();if(e&&t==="click"){const s=this._adapter.getPopupId();this.setFocusToFirstMenuItem(s)}}getMenuItemNodes(e){const t=document.getElementById(e);return t?Array.from(t.getElementsByTagName("li")).filter(s=>s.ariaDisabled==="false"):null}setFocusToFirstMenuItem(e){const t=this.getMenuItemNodes(e);t&&ne(t)}setFocusToLastMenuItem(e){const t=this.getMenuItemNodes(e);t&&oe(t)}handleKeyDown(e){var t,s;const i=(s=(t=e.target)===null||t===void 0?void 0:t.attributes["data-popupid"])===null||s===void 0?void 0:s.value,{visible:r}=this._adapter.getStates();switch(e.key){case" ":case"Enter":e.target.click();break;case"ArrowDown":this.setFocusToFirstMenuItem(i),r&&D(e);break;case"ArrowUp":this.setFocusToLastMenuItem(i),r&&D(e);break}}}class Se extends A{constructor(){super(...arguments),this.menuItemNodes=null,this.firstChars=[]}handleEscape(e){this._adapter.getContext("trigger")==="custom"&&(e&&ie(document.querySelectorAll("[data-popupid]"),e.id)).focus()}setFocusByFirstCharacter(e,t){const s=re(this.menuItemNodes,e,this.firstChars,t);s>=0&&ae(this.menuItemNodes,this.menuItemNodes[s])}onMenuKeydown(e){const t=le(e.target,"tooltip");this.menuItemNodes||(this.menuItemNodes=[...e.target.parentNode.getElementsByTagName("li")].filter(i=>i.ariaDisabled!=="true")),this.firstChars.length===0&&this.menuItemNodes.forEach(i=>{var r;this.firstChars.push((r=i.textContent.trim()[0])===null||r===void 0?void 0:r.toLowerCase())});const s=this.menuItemNodes.find(i=>i.tabIndex===0);switch(e.key){case" ":case"Enter":e.target.click();break;case"Escape":this.handleEscape(t);break;case"ArrowUp":pe(this.menuItemNodes,s),D(e);break;case"ArrowDown":de(this.menuItemNodes,s),D(e);break;default:ce(e.key)&&this.setFocusByFirstCharacter(s,e.key);break}}}const E=a.createContext({level:0});var Pe=function(o,e){var t={};for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&e.indexOf(s)<0&&(t[s]=o[s]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(o);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(o,s[i])&&(t[s[i]]=o[s[i]]);return t};const Fe=_.PREFIX;class $ extends M{constructor(e){super(e),this.foundation=new Se(this.adapter)}get adapter(){return Object.assign({},super.adapter)}render(){const e=this.props,{children:t,className:s,style:i}=e,r=Pe(e,["children","className","style"]);return a.createElement("ul",Object.assign({role:"menu","aria-orientation":"vertical"},r,{className:f(`${Fe}-menu`,s),style:i,onKeyDown:l=>this.foundation.onMenuKeydown(l)}),t)}}$.propTypes={children:n.node,className:n.string,style:n.object};$.contextType=E;const g=_.PREFIX;class N extends M{render(){const{children:e,disabled:t,className:s,forwardRef:i,style:r,type:l,active:d,icon:u,onKeyDown:T,showTick:x,hover:m}=this.props,{showTick:C}=this.context,p=C??x,P=f(s,{[`${g}-item`]:!0,[`${g}-item-disabled`]:t,[`${g}-item-hover`]:m,[`${g}-item-withTick`]:p,[`${g}-item-${l}`]:l,[`${g}-item-active`]:d}),y={};t||["onClick","onMouseEnter","onMouseLeave","onContextMenu"].forEach(h=>{this.context.level!==1&&h==="onClick"?y.onMouseDown=V=>{var B,F;V.button===0&&((F=(B=this.props)[h])===null||F===void 0||F.call(B,V))}:y[h]=this.props[h]});let I=null;switch(!0){case(p&&d):I=a.createElement(H,null);break;case(p&&!d):I=a.createElement(H,{style:{color:"transparent"}});break;default:I=null;break}let v=null;return u&&(v=a.createElement("div",{className:`${g}-item-icon`},u)),a.createElement("li",Object.assign({role:"menuitem",tabIndex:-1,"aria-disabled":t},y,{onKeyDown:T,ref:h=>i(h),className:P,style:r},this.getDataAttr(this.props)),I,v,e)}}N.propTypes={children:n.oneOfType([n.string,n.node]),name:n.string,disabled:n.bool,selected:n.bool,onClick:n.func,onMouseEnter:n.func,onMouseLeave:n.func,onContextMenu:n.func,className:n.string,style:n.object,forwardRef:n.func,type:n.oneOf(S.ITEM_TYPE),active:n.bool,icon:n.node};N.contextType=E;N.defaultProps={disabled:!1,divided:!1,selected:!1,onMouseEnter:w,onMouseLeave:w,forwardRef:w};N.elementType="Dropdown.Item";const ke=_.PREFIX,q=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{style:e,className:t}=o;return a.createElement("div",{className:f(`${ke}-divider`,t),style:e})};q.propTypes={style:n.object,className:n.string};const Y=_.PREFIX;class L extends O.PureComponent{render(){const{className:e,style:t,children:s}=this.props,{showTick:i}=this.context,r=f({[`${Y}-title`]:!0,[`${Y}-title-withTick`]:i},e);return a.createElement("div",{className:r,style:t},s)}}L.propTypes={children:n.node,className:n.string,style:n.object};L.contextType=E;var j=function(o,e){var t={};for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&e.indexOf(s)<0&&(t[s]=o[s]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(o);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(o,s[i])&&(t[s[i]]=o[s[i]]);return t};const je=S.POSITION_SET,Ae=S.TRIGGER_SET;class c extends M{constructor(e){super(e),this.handleVisibleChange=t=>this.foundation.handleVisibleChange(t),this.state={popVisible:e.visible},this.foundation=new Me(this.adapter),this.tooltipRef=a.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setPopVisible:e=>this.setState({popVisible:e}),notifyVisibleChange:e=>{var t,s;return(s=(t=this.props).onVisibleChange)===null||s===void 0?void 0:s.call(t,e)},getPopupId:()=>this.tooltipRef.current.getPopupId()})}renderContent(){const{render:e,menu:t,contentClassName:s,style:i,showTick:r,prefixCls:l,trigger:d}=this.props,u=f(l,s),{level:T=0}=this.context,x={showTick:r,level:T+1,trigger:d};let m=null;return a.isValidElement(e)?m=e:Array.isArray(t)&&(m=this.renderMenu()),a.createElement(E.Provider,{value:x},a.createElement("div",{className:u,style:i},a.createElement("div",{className:`${l}-content`,"x-semi-prop":"render"},m)))}renderMenu(){const{menu:e}=this.props,t=e.map((s,i)=>{switch(s.node){case"title":{const{name:r,node:l}=s,d=j(s,["name","node"]);return a.createElement(c.Title,Object.assign({},d,{key:l+r+i}),r)}case"item":{const{node:r,name:l}=s,d=j(s,["node","name"]);return a.createElement(c.Item,Object.assign({},d,{key:r+l+i}),l)}case"divider":return a.createElement(c.Divider,{key:s.node+i});default:return null}});return a.createElement(c.Menu,null,t)}renderPopCard(){const{render:e,contentClassName:t,style:s,showTick:i,prefixCls:r}=this.props,l=f(r,t),{level:d=0}=this.context,u={showTick:i,level:d+1};return a.createElement(E.Provider,{value:u},a.createElement("div",{className:l,style:s},a.createElement("div",{className:`${r}-content`},e)))}render(){const e=this.props,{children:t,position:s,trigger:i,onVisibleChange:r,zIndex:l,className:d,motion:u,margin:T,style:x,prefixCls:m}=e,C=j(e,["children","position","trigger","onVisibleChange","zIndex","className","motion","margin","style","prefixCls"]);let{spacing:p}=this.props;const{level:P}=this.context,{popVisible:y}=this.state,I=this.renderContent();return P>0?p=typeof p=="number"?p:U.NESTED_SPACING:(p===null||typeof p>"u")&&(p=U.SPACING),a.createElement(he,Object.assign({zIndex:l,motion:u,margin:T,content:I,className:d,prefixCls:m,spacing:p,position:s,trigger:i,onVisibleChange:this.handleVisibleChange,showArrow:!1,returnFocusOnClose:!0,ref:this.tooltipRef},C),a.isValidElement(t)?a.cloneElement(t,{className:f(K(t,"props.className"),{[`${m}-showing`]:y}),"aria-haspopup":!0,"aria-expanded":y,onKeyDown:v=>{this.foundation.handleKeyDown(v);const h=K(t,"props.onKeyDown");h&&h(v)}}):t)}}c.Menu=$;c.Item=N;c.Divider=q;c.Title=L;c.contextType=E;c.propTypes={children:n.node,contentClassName:n.oneOfType([n.string,n.array]),className:n.string,getPopupContainer:n.func,margin:n.oneOfType([n.number,n.object]),mouseEnterDelay:n.number,mouseLeaveDelay:n.number,menu:n.array,motion:n.oneOfType([n.bool,n.func,n.object]),onVisibleChange:n.func,prefixCls:n.string,position:n.oneOf(je),rePosKey:n.oneOfType([n.string,n.number]),render:n.node,spacing:n.oneOfType([n.number,n.object]),showTick:n.bool,style:n.object,trigger:n.oneOf(Ae),visible:n.bool,zIndex:n.number};c.__SemiComponentName__="Dropdown";c.defaultProps=Z(c.__SemiComponentName__,{onVisibleChange:w,prefixCls:_.PREFIX,zIndex:ue.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",position:"bottom",mouseLeaveDelay:S.DEFAULT_LEAVE_DELAY,showTick:!1,closeOnEsc:!0,onEscKeyDown:w});export{b as C,c as D,ze as I,He as _,Be as a,Ce as t};
