import{r as u,n as a,j as H}from"./jsx-runtime-BVzQf6E0.js";import{c as N,b as R,B as $,e as k,a as j,h as Z,U as F,au as A,P as d,l as W,j as E,bg as L,C as U}from"./width_limit-CngMnDB3.js";import{a as P}from"./index-Dm89QOQe.js";import{_ as D}from"./page_header-p8RXdD20.js";import{I as V}from"./index-CroKYYni.js";import{S as q}from"./client-c40QJxix.js";function G(i){return u.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13.5 17.5C13.5 16.6716 12.8284 16 12 16C11.1716 16 10.5 16.6716 10.5 17.5C10.5 18.3284 11.1716 19 12 19C12.8284 19 13.5 18.3284 13.5 17.5ZM12 5C10.9138 5 10.0507 5.91244 10.1109 6.99692L10.4168 12.5023C10.4635 13.3426 11.1584 14 12 14C12.8416 14 13.5365 13.3426 13.5832 12.5023L13.8891 6.99692C13.9493 5.91244 13.0862 5 12 5Z",fill:"currentColor"}))}const X=N(G,"alert_circle");function J(i){return u.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2268 2.3986L1.52616 19.0749C0.831449 20.4064 1.79747 22 3.29933 22H20.7007C22.2025 22 23.1686 20.4064 22.4739 19.0749L13.7732 2.3986C13.0254 0.965441 10.9746 0.965442 10.2268 2.3986ZM13.1415 14.0101C13.0603 14.5781 12.5739 15 12.0001 15C11.4263 15 10.9398 14.5781 10.8586 14.0101L10.2829 9.97992C10.1336 8.93495 10.9445 8.00002 12.0001 8.00002C13.0556 8.00002 13.8665 8.93495 13.7172 9.97992L13.1415 14.0101ZM13.5001 18.5C13.5001 19.3284 12.8285 20 12.0001 20C11.1716 20 10.5001 19.3284 10.5001 18.5C10.5001 17.6716 11.1716 17 12.0001 17C12.8285 17 13.5001 17.6716 13.5001 18.5Z",fill:"currentColor"}))}const K=N(J,"alert_triangle");function Q(i){return u.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),u.createElement("path",{d:"M17.6568 19.7782C18.2426 20.3639 19.1924 20.3639 19.7782 19.7782C20.3639 19.1924 20.3639 18.2426 19.7782 17.6568L14.1213 12L19.7782 6.34313C20.3639 5.75734 20.3639 4.8076 19.7782 4.22181C19.1924 3.63602 18.2426 3.63602 17.6568 4.22181L12 9.87866L6.34313 4.22181C5.75734 3.63602 4.8076 3.63602 4.22181 4.22181C3.63602 4.8076 3.63602 5.75734 4.22181 6.34313L9.87866 12L4.22181 17.6568C3.63602 18.2426 3.63602 19.1924 4.22181 19.7782C4.8076 20.3639 5.75734 20.3639 6.34313 19.7782L12 14.1213L17.6568 19.7782Z",fill:"currentColor"}))}const Y=N(Q,"close");function ee(i){return u.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM14 7C14 8.10457 13.1046 9 12 9C10.8954 9 10 8.10457 10 7C10 5.89543 10.8954 5 12 5C13.1046 5 14 5.89543 14 7ZM9 10.75C9 10.3358 9.33579 10 9.75 10H12.5C13.0523 10 13.5 10.4477 13.5 11V16.5H14.25C14.6642 16.5 15 16.8358 15 17.25C15 17.6642 14.6642 18 14.25 18H9.75C9.33579 18 9 17.6642 9 17.25C9 16.8358 9.33579 16.5 9.75 16.5H10.5V11.5H9.75C9.33579 11.5 9 11.1642 9 10.75Z",fill:"currentColor"}))}const te=N(ee,"info_circle");function ne(i){return u.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.8831 9.82235L11.6854 17.4112C11.4029 17.7806 10.965 17.9981 10.5 18C10.035 18.0019 9.59533 17.788 9.30982 17.421L5.81604 13.4209C5.30744 12.767 5.42524 11.8246 6.07916 11.316C6.73308 10.8074 7.67549 10.9252 8.1841 11.5791L10.4838 14.0439L15.5 8C16.0032 7.34193 16.9446 7.21641 17.6027 7.71964C18.2608 8.22287 18.3863 9.16428 17.8831 9.82235Z",fill:"currentColor"}))}const se=N(ne,"tick_circle");class oe extends R{addNotice(e){const n=this._adapter.getNotices();this._adapter.updateNotices([e,...n])}has(e){return this._adapter.getNotices().some(n=>n.id===e)}update(e,n){let t=this._adapter.getNotices();t=t.map(o=>o.id===e?Object.assign(Object.assign({},o),n):o);const s=t.filter(o=>o.id===e);this._adapter.updateNotices(t,[],s)}removeNotice(e){let n=this._adapter.getNotices();const t=[];n=n.filter(s=>s.id===e?(t.push(s),!1):!0),this._adapter.updateNotices(n,t)}destroyAll(){const e=this._adapter.getNotices();e.length>0&&this._adapter.updateNotices([],e)}}const w={WRAPPER:`${$}-notification-wrapper`,LIST:`${$}-notification-list`,NOTICE:`${$}-notification-notice`},M={types:["warning","success","info","error","default"],themes:["normal","light"],directions:["ltr","rtl"]},ie={duration:3};class T extends R{constructor(e){super(Object.assign(Object.assign({},T.defaultAdapter),e)),this._timer=null,this._id=null}init(){this._startCloseTimer(),this._id=this.getProp("id")}destroy(){this._clearCloseTimer()}_startCloseTimer(){const e=this.getProp("duration");e&&D(e)&&(this._timer=setTimeout(()=>{this.close()},e*1e3))}close(e){e&&e.stopPropagation(),this._adapter.notifyWrapperToRemove(this._id),this._adapter.notifyClose()}_clearCloseTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}restartCloseTimer(){this._clearCloseTimer(),this._startCloseTimer()}}var re=function(i,e){var n={};for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&e.indexOf(t)<0&&(n[t]=i[t]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(i);s<t.length;s++)e.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(i,t[s])&&(n[t[s]]=i[t[s]]);return n};const p=w.NOTICE,{duration:ae}=ie,{types:z,themes:ce,directions:le}=M;class g extends k{get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyWrapperToRemove:e=>{this.props.close(e)},notifyClose:()=>{this.props.onClose(),this.props.onHookClose&&this.props.onHookClose()}})}constructor(e){super(e),this.clearCloseTimer=()=>{this.foundation._clearCloseTimer()},this.startCloseTimer=()=>{this.foundation._startCloseTimer()},this.close=n=>{this.props.onCloseClick(this.props.id),this.foundation.close(n)},this.notifyClick=n=>{this.props.onClick(n)},this.state={visible:!0},this.foundation=new T(this.adapter)}componentWillUnmount(){this.foundation.destroy()}renderTypeIcon(){const{type:e,icon:n}=this.props;let s={warning:a.createElement(K,{size:"large"}),success:a.createElement(se,{size:"large"}),info:a.createElement(te,{size:"large"}),error:a.createElement(X,{size:"large"})}[e];const o=j({[`${p}-icon`]:!0,[`${p}-${e}`]:!0});return n&&(s=n),s?a.createElement("div",{className:o,"x-semi-prop":"icon"},Z(s)?a.cloneElement(s,{size:s.props.size||"large"}):s):null}render(){const e=this.props.direction||this.context.direction,n=e==="rtl"?"topLeft":"topRight",t=this.props,{content:s,title:o,theme:r,position:c=n,type:l,id:m,onCloseClick:_,className:h,showClose:v,style:I}=t;re(t,["content","title","theme","position","type","id","onCloseClick","className","showClose","style"]);const{visible:S}=this.state,x=j(p,h,{[`${p}-close`]:!S,[`${p}-icon-show`]:z.includes(l),[`${p}-${l}`]:!0,[`${p}-${r}`]:r==="light",[`${p}-rtl`]:e==="rtl"}),b=F({});return a.createElement("div",{className:x,style:I,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:this.notifyClick,"aria-labelledby":b,role:"alert",onAnimationEnd:this.props.onAnimationEnd,onAnimationStart:this.props.onAnimationStart},a.createElement("div",null,this.renderTypeIcon()),a.createElement("div",{className:`${p}-inner`},a.createElement("div",{className:`${p}-content-wrapper`},o?a.createElement("div",{id:b,className:`${p}-title`,"x-semi-prop":"title"},o):"",s?a.createElement("div",{className:`${p}-content`,"x-semi-prop":"content"},s):""),v&&a.createElement(V,{className:`${p}-icon-close`,type:"tertiary",icon:a.createElement(Y,null),theme:"borderless",size:"small",onClick:this.close})))}}g.contextType=A;g.propTypes={duration:d.number,id:d.string,title:d.node,content:d.node,type:d.oneOf(z),theme:d.oneOf(ce),icon:d.node,onClick:d.func,onClose:d.func,onCloseClick:d.func,showClose:d.bool,close:d.func,direction:d.oneOf(le)};g.__SemiComponentName__="Notification";g.defaultProps=W(g.__SemiComponentName__,{duration:ae,id:"",close:E,onClose:E,onClick:E,onCloseClick:E,content:"",title:"",showClose:!0,theme:"normal"});var de=function(i,e){var n={};for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&e.indexOf(t)<0&&(n[t]=i[t]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(i);s<t.length;s++)e.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(i,t[s])&&(n[t[s]]=i[t[s]]);return n};const me=(i,e)=>{var{afterClose:n}=i,t=de(i,["afterClose"]);const[s,o]=u.useState(!0),r=()=>{o(!1)};return a.useImperativeHandle(e,()=>({close:()=>{o(!1)}})),u.useEffect(()=>{s||n(String(t.id))},[s]),s?a.createElement(g,Object.assign({},t,{onHookClose:r})):null},ue=a.forwardRef(me),O={duration:3,position:"topRight",motion:!0,content:"",title:"",zIndex:1010};function pe(){const[i,e]=u.useState([]);function n(s,o){return e(r=>[{element:s,config:o},...r]),r=>{e(c=>c.filter(l=>{let{config:m}=l;return m.id!==r}))}}function t(){const s={top:[],topLeft:[],topRight:[],bottom:[],bottomLeft:[],bottomRight:[]};return i.forEach(o=>{let{element:r,config:c}=o;const{position:l}=c;s[l].push(r)}),Object.entries(s).map(o=>{const r=o[0],c=o[1];return Array.isArray(c)&&c.length?a.createElement("div",{key:r,className:j(w.LIST),placement:r},c):null})}return[t(),n]}function fe(){const[i,e]=pe(),n=new Map,t=o=>{const r=L("semi_notice_"),c=Object.assign(Object.assign({},o),{id:r});let l;const m=h=>{n.set(r,h)},_=a.createElement(ue,Object.assign({key:r},c,{afterClose:h=>l(h),ref:m}));return l=e(_,Object.assign({},c)),r};return[{success:o=>t(Object.assign(Object.assign(Object.assign({},O),o),{type:"success"})),info:o=>t(Object.assign(Object.assign(Object.assign({},O),o),{type:"info"})),error:o=>t(Object.assign(Object.assign(Object.assign({},O),o),{type:"error"})),warning:o=>t(Object.assign(Object.assign(Object.assign({},O),o),{type:"warning"})),open:o=>t(Object.assign(Object.assign(Object.assign({},O),o),{type:"default"})),close:o=>{const r=n.get(o);r&&r.close()}},a.createElement(a.Fragment,null,i)]}let f=null;const y={duration:3,position:"topRight",motion:!0,content:"",title:"",zIndex:1010};class C extends k{constructor(e){var n;super(e),n=this,this.add=t=>this.foundation.addNotice(t),this.has=t=>this.foundation.has(t),this.remove=t=>{this.foundation.removeNotice(String(t))},this.update=(t,s)=>this.foundation.update(t,s),this.destroyAll=()=>this.foundation.destroyAll(),this.renderNoticeInPosition=function(t,s){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];const c=j(w.LIST);if(t.length){const l=n.setPosInStyle(t[0]);return a.createElement("div",{placement:s,key:s,className:c,style:l},t.map((m,_)=>{const h=o.find(v=>v.id===m.id)!==void 0;return a.createElement(U,{key:m.id,animationState:h?"leave":"enter",startClassName:`${w.NOTICE}-animation-${h?"hide":"show"}_${s}`},v=>{let{animationClassName:I,animationEventsNeedBind:S,isAnimating:x}=v;return h&&!x?null:a.createElement(g,Object.assign({},m,{ref:b=>{b&&r.some(B=>B.id===b.props.id)&&b.foundation.restartCloseTimer()},className:j({[m.className]:!!m.className,[I]:!0})},S,{style:Object.assign({},m.style),close:n.remove}))})}))}return null},this.state={notices:[],removedItems:[],updatedItems:[]},this.noticeStorage=[],this.removeItemStorage=[],this.foundation=new oe(this.adapter)}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{updateNotices:function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];e.noticeStorage=[...n],e.removeItemStorage=[...t],e.setState({notices:n,removedItems:t,updatedItems:s})},getNotices:()=>this.noticeStorage})}static addNotice(e){var n;e=Object.assign(Object.assign({},y),e);const t=(n=e.id)!==null&&n!==void 0?n:L("notification");if(f)f.has(`${t}`)?f.update(t,e):f.add(Object.assign(Object.assign({},e),{id:t}));else{const{getPopupContainer:s}=e,o=document.createElement("div");this.wrapperId||(this.wrapperId=L("notification-wrapper").slice(0,32)),o.className=w.WRAPPER,o.id=this.wrapperId,o.style.zIndex=String(typeof e.zIndex=="number"?e.zIndex:y.zIndex),s?s().appendChild(o):document.body.appendChild(o),P.render(a.createElement(C,{ref:r=>f=r}),o,()=>{f.add(Object.assign(Object.assign({},e),{id:t}))})}return t}static removeNotice(e){return f&&f.remove(e),e}static info(e){return this.addNotice(Object.assign(Object.assign({},e),{type:"info"}))}static success(e){return this.addNotice(Object.assign(Object.assign({},e),{type:"success"}))}static error(e){return this.addNotice(Object.assign(Object.assign({},e),{type:"error"}))}static warning(e){return this.addNotice(Object.assign(Object.assign({},e),{type:"warning"}))}static open(e){return this.addNotice(Object.assign(Object.assign({},e),{type:"default"}))}static close(e){return this.removeNotice(e)}static destroyAll(){if(f){f.destroyAll();const e=document.querySelector(`#${this.wrapperId}`);P.unmountComponentAtNode(e),e&&e.parentNode.removeChild(e),f=null,this.wrapperId=null}}static config(e){["top","left","bottom","right"].map(n=>{n in e&&(y[n]=e[n])}),typeof e.zIndex=="number"&&(y.zIndex=e.zIndex),typeof e.duration=="number"&&(y.duration=e.duration),typeof e.position=="string"&&(y.position=e.position)}setPosInStyle(e){const n={};return["top","left","bottom","right"].forEach(t=>{if(t in e){const s=e[t];n[t]=typeof s=="number"?`${s}px`:s}}),n}render(){let{notices:e}=this.state;const{removedItems:n,updatedItems:t}=this.state;e=Array.from(new Set([...e,...n]));const s={top:[],topLeft:[],topRight:[],bottom:[],bottomLeft:[],bottomRight:[]};e.forEach(r=>{const l=(r.direction||this.context.direction)==="rtl"?"topLeft":"topRight",m=r.position||l;s[m].push(r)});const o=Object.entries(s).map(r=>{const c=r[0],l=r[1];return this.renderNoticeInPosition(l,c,n,t)});return a.createElement(a.Fragment,null,o)}}C.contextType=A;C.propTypes={style:d.object,className:d.string,direction:d.oneOf(M.directions)};C.defaultProps={};C.useNotification=fe;function Oe({useData:i,children:e,size:n,spin:t,spinStyle:s}){const{data:o,isLoading:r,error:c}=i(),[l,m]=u.useState(!1);if(n=n??"middle",t=t??!0,t&&r)return H.jsx(q,{size:n,style:{display:"block",margin:"auto",marginTop:n==="large"?"5em":n==="middle"?"3.5em":"1.5em",...s}});if(c){l||(m(!0),C.open({title:"加载失败",content:`${c}`,duration:3}));return}return o?e(o):null}export{Y as I,Oe as L,C as N,te as a,se as b,K as c,X as d};
