import{r as b,g as H,n as o,j as v}from"./jsx-runtime-BVzQf6E0.js";import{c as U,as as W,at as X,B as R,b as G,d as V,e as F,bi as Y,H as Z,ap as q,m as J,a as _,P as t,n as B,M as w,J as K,q as Q,F as N,av as ee,g as te,W as se}from"./width_limit-CngMnDB3.js";function ne(m){return b.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},m),b.createElement("path",{d:"M7 12C7 13.3807 5.88071 14.5 4.5 14.5C3.11929 14.5 2 13.3807 2 12C2 10.6193 3.11929 9.5 4.5 9.5C5.88071 9.5 7 10.6193 7 12Z",fill:"currentColor"}),b.createElement("path",{d:"M14.5 12C14.5 13.3807 13.3807 14.5 12 14.5C10.6193 14.5 9.5 13.3807 9.5 12C9.5 10.6193 10.6193 9.5 12 9.5C13.3807 9.5 14.5 10.6193 14.5 12Z",fill:"currentColor"}),b.createElement("path",{d:"M19.5 14.5C20.8807 14.5 22 13.3807 22 12C22 10.6193 20.8807 9.5 19.5 9.5C18.1193 9.5 17 10.6193 17 12C17 13.3807 18.1193 14.5 19.5 14.5Z",fill:"currentColor"}))}const M=U(ne,"more");var re=W,oe=X,ae="[object Number]";function ie(m){return typeof m=="number"||oe(m)&&re(m)==ae}var le=ie;const O=H(le),L={PREFIX:`${R}-breadcrumb`},ce={MORE_TYPE:["default","popover"]};class pe extends G{constructor(s){super(Object.assign({},s))}handleClick(s,e){this._adapter.notifyClick(s,e)}handleExpand(s){this._adapter.expandCollapsed(s)}handleExpandEnterPress(s){V(s)&&this.handleExpand(s)}genRoutes(s){return s.map(e=>{if(typeof e!="object")return{name:e,_origin:{name:e}};let r={};return r._origin=e,Object.assign(Object.assign({},r),e)})}}class me extends G{constructor(s){super(Object.assign({},s))}handleClick(s,e){this._adapter.notifyClick(s,e),this._adapter.notifyParent(s,e)}}const S=o.createContext({}),g=L.PREFIX;class x extends F{get adapter(){var s=this;return Object.assign(Object.assign({},super.adapter),{notifyClick:function(){s.props.onClick(...arguments)},notifyParent:function(){s.context.onClick(...arguments)}})}constructor(s){super(s),this.renderIcon=()=>{const e=this.props.icon,{compact:r}=this.context,n=r?"small":"default",a=`${g}-item-icon`;return o.isValidElement(e)?o.cloneElement(e,{className:a,size:n}):e},this.getTooltipOpt=()=>{const{showTooltip:e}=this.context;if(!e)return{width:150,ellipsisPos:"end"};const r={width:150,ellipsisPos:"end",opts:{autoAdjustOverflow:!0,position:"top"}};return typeof e=="object"?Y(r,e):r},this.getItemInfo=()=>{let e={};const{route:r,children:n,href:a}=this.props,i=!Z(a)&&!q(a);return r?e=r:(e.name=n,i&&(e.href=a)),e},this.renderBreadItem=()=>{const{children:e}=this.props,{compact:r}=this.context,n=this.getTooltipOpt(),a=this.renderIcon();if(e&&typeof e=="string"){const{opts:i,ellipsisPos:p,width:u}=n;return o.createElement(b.Fragment,null,a,o.createElement("span",{className:`${g}-item-title`},o.createElement(J.Text,{ellipsis:{showTooltip:i?{opts:i}:!1,pos:p},style:{maxWidth:u},size:r?"small":"normal"},e)))}return o.createElement(b.Fragment,null,a,e?o.createElement("span",{className:`${g}-item-title ${g}-item-title-inline`},e):null)},this.renderItem=()=>{const{href:e,active:r,noLink:n}=this.props,a=e!==null&&typeof e<"u",i=_({[`${g}-item`]:!0,[`${g}-item-active`]:r,[`${g}-item-link`]:!n}),p=this.renderBreadItem(),u=r||!a?"span":"a",d=this.getItemInfo();return o.createElement(u,{className:i,onClick:l=>this.foundation.handleClick(d,l),href:e},p)},this.foundation=new me(this.adapter)}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}render(){const{active:s,shouldRenderSeparator:e}=this.props,r=s?{"aria-current":"page"}:{},n=this.renderItem(),a=this.props.separator||o.createElement("span",{className:`${g}-separator`},this.context.separator),i=_({[`${g}-item-wrap`]:!0});return o.createElement("span",Object.assign({className:i},r,this.getDataAttr(this.props)),n,e&&a)}}x.isBreadcrumbItem=!0;x.contextType=S;x.propTypes={onClick:t.func,route:t.oneOfType([t.object,t.string]),name:t.string,children:t.node,active:t.bool,shouldRenderSeparator:t.bool,icon:t.node,separator:t.node,noLink:t.bool};x.defaultProps={onClick:B,shouldRenderSeparator:!0};const C=L.PREFIX;class $ extends F{constructor(s){super(s),this.handleCollapse=(e,r)=>{const{maxItemCount:n,renderMore:a,moreType:i}=this.props,p=w(a),u=e.slice(1,r-n+1),d=o.createElement("span",{className:`${C}-collapse`,key:`more-${r}`},o.createElement("span",{className:`${C}-item-wrap`},o.createElement("span",{role:"button",tabIndex:0,"aria-label":"Expand breadcrumb items",className:`${C}-item ${C}-item-more`,onClick:l=>this.foundation.handleExpand(l),onKeyPress:l=>this.foundation.handleExpandEnterPress(l)},p&&a(u),!p&&i==="default"&&o.createElement(M,null),!p&&i==="popover"&&this.renderPopoverMore(u)),o.createElement("span",{className:`${C}-separator`,"x-semi-prop":"separator"},this.props.separator)));return e.splice(1,r-n,d),e},this.renderRouteItems=(e,r,n)=>{const{renderItem:a,renderMore:i,maxItemCount:p}=this.props,u=e.length-p,d=w(i);return e.map((c,h)=>{const T=c._origin.key||`item-${c.name||c.path}-${h}`,I=h>0&&h<=u;return o.createElement(x,Object.assign({},c,{key:T,active:this.props.activeIndex!==void 0?this.props.activeIndex===h:h===e.length-1,route:c._origin,shouldRenderSeparator:h!==e.length-1&&!(r&&(d||n)&&I)}),a?a(c._origin):c.name)})},this.renderList=()=>{const{routes:e,children:r,autoCollapse:n,maxItemCount:a,renderMore:i,moreType:p}=this.props,{isCollapsed:u}=this.state,d=e&&e.length>0,l=d?this.foundation.genRoutes(e):o.Children.toArray(r);let c;const h=l.length,T=h-a,I=l&&n&&h>a&&u,z=w(i),A=p==="popover";return d?c=this.renderRouteItems(l,I,A):c=l.map((P,y)=>{const D=y>0&&y<=T;return P&&(K(P.type&&!P.type.isBreadcrumbItem,"[Semi Breadcrumb]: Only accepts Breadcrumb.Item as its children"),o.cloneElement(P,{key:`${y}-item`,active:this.props.activeIndex!==void 0?this.props.activeIndex===y:y===l.length-1,shouldRenderSeparator:y!==l.length-1&&!(I&&(z||A)&&D)}))}),I?this.handleCollapse(c,l.length):c},this.onClick=(e,r)=>{this.foundation.handleClick(e,r)},this.foundation=new pe(this.adapter),this.state={isCollapsed:!0},this.onClick=this.onClick.bind(this)}get adapter(){var s=this;return Object.assign(Object.assign({},super.adapter),{notifyClick:function(){s.props.onClick(...arguments)},expandCollapsed:()=>this.setState({isCollapsed:!1})})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}renderPopoverMore(s){const{separator:e}=this.props,r=o.createElement(o.Fragment,null,s.map((n,a)=>o.createElement(o.Fragment,{key:`restItem-${a}`},n,a!==s.length-1&&o.createElement("span",{className:`${C}-restItem`},e))));return o.createElement(Q,{content:r,style:{padding:12},showArrow:!0},o.createElement(M,null))}render(){const s=this.renderList(),{compact:e,className:r,style:n,separator:a,showTooltip:i}=this.props,p=_(r,{[`${C}-wrapper`]:!0,[`${C}-wrapper-compact`]:e,[`${C}-wrapper-loose`]:!e});return o.createElement(S.Provider,{value:{onClick:this.onClick,showTooltip:i,compact:e,separator:a}},o.createElement("nav",Object.assign({"aria-label":this.props["aria-label"],className:p,style:n},this.getDataAttr(this.props)),s))}}$.contextType=S;$.Item=x;$.propTypes={activeIndex:t.number,routes:t.array,onClick:t.func,separator:t.node,compact:t.bool,children:t.node,style:t.object,renderItem:t.func,showTooltip:t.oneOfType([t.shape({width:t.oneOfType([t.string,t.number]),ellipsisPos:t.oneOf(["end","middle"]),opts:t.object}),t.bool]),className:t.string,autoCollapse:t.bool,maxItemCount:t.number,renderMore:t.func,moreType:t.oneOf(ce.MORE_TYPE),"aria-label":t.string};$.defaultProps={routes:[],onClick:B,renderItem:void 0,separator:"/",compact:!0,showTooltip:{width:150,ellipsisPos:"end"},autoCollapse:!0,moreType:"default",maxItemCount:4,"aria-label":"Breadcrumb"};const de={PREFIX:`${R}-space`},E={ALIGN_SET:["start","end","center","baseline"],SPACING_LOOSE:"loose",SPACING_MEDIUM:"medium",SPACING_TIGHT:"tight"},ue="Symbol(react.fragment)",k=m=>{let s=[];return o.Children.forEach(m,e=>{e!=null&&(Array.isArray(e)?s=s.concat(k(e)):b.isValidElement(e)&&e.type&&e.type.toString()===ue&&e.props?s=s.concat(k(e.props.children)):s.push(e))}),s},f=de.PREFIX;class j extends b.PureComponent{render(){const{children:s=null,style:e,className:r,spacing:n,wrap:a,align:i,vertical:p}=this.props,u=a&&p?!1:a,d=Object.assign({},e);let l="",c="";N(n)?(l=n,c=n):O(n)?(d.rowGap=n,d.columnGap=n):ee(n)&&(N(n[0])?l=n[0]:O(n[0])&&(d.columnGap=`${n[0]}px`),N(n[1])?c=n[1]:O(n[1])&&(d.rowGap=`${n[1]}px`));const h=_(f,r,{[`${f}-align-${i}`]:i,[`${f}-vertical`]:p,[`${f}-horizontal`]:!p,[`${f}-wrap`]:u,[`${f}-tight-horizontal`]:l===E.SPACING_TIGHT,[`${f}-tight-vertical`]:c===E.SPACING_TIGHT,[`${f}-medium-horizontal`]:l===E.SPACING_MEDIUM,[`${f}-medium-vertical`]:c===E.SPACING_MEDIUM,[`${f}-loose-horizontal`]:l===E.SPACING_LOOSE,[`${f}-loose-vertical`]:c===E.SPACING_LOOSE}),T=k(s),I=te(this.props);return o.createElement("div",Object.assign({},I,{className:h,style:d,"x-semi-prop":"children"}),T)}}j.propTypes={wrap:t.bool,align:t.oneOf(E.ALIGN_SET),vertical:t.bool,spacing:t.oneOfType([t.string,t.number,t.array]),children:t.node,style:t.object,className:t.string};j.defaultProps={vertical:!1,wrap:!1,spacing:"tight",align:"center"};function ge({children:m,routes:s}){return v.jsx("div",{style:{padding:"1em 0",backgroundColor:"#FFF",boxShadow:"0px 1px 2px rgba(0, 0, 0, 0.1)"},children:v.jsx(se,{children:v.jsxs(j,{vertical:!0,align:"start",spacing:"loose",children:[v.jsx($,{showTooltip:{width:"24em",opts:{position:"bottom"}},routes:s}),m]})})})}export{ge as P,j as S,O as _,le as i};
