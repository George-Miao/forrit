import{n as se,r as E,g as Ut}from"./jsx-runtime-BVzQf6E0.js";import{B as zt,b as Wt,e as Ht,bh as Gt,a as Qt,P as R}from"./width_limit-CngMnDB3.js";const Bt=`${zt}-spin`,Kt={PREFIX:Bt},Yt={SIZE:["small","middle","large"]};class Ye extends Wt{static get spinDefaultAdapter(){return{getProp:()=>{},setLoading:t=>{}}}constructor(t){super(Object.assign(Object.assign({},Ye.spinDefaultAdapter),t))}updateLoadingIfNeedDelay(){const{spinning:t,delay:n}=this._adapter.getProps(),{delay:r}=this._adapter.getStates();if(r){const s=this;this._timer=setTimeout(()=>{s._adapter.setState({loading:t,delay:0})},n)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}var Jt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const pe=Kt.PREFIX;class gt extends Ht{constructor(t){super(t),this.foundation=new Ye(this.adapter),this.state={delay:t.delay,loading:!0}}static getDerivedStateFromProps(t){return t.delay?t.spinning===!1?{delay:0,loading:!1}:{delay:t.delay}:{loading:t.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:t=>{this.setState({loading:t})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){const{indicator:t,tip:n}=this.props,{loading:r}=this.state;return r?se.createElement("div",{className:`${pe}-wrapper`},t?se.createElement("div",{className:`${pe}-animate`,"x-semi-prop":"indicator"},t):se.createElement(Gt,null),n?se.createElement("div",{"x-semi-prop":"tip"},n):null):null}render(){this.foundation.updateLoadingIfNeedDelay();const t=this.props,{children:n,style:r,wrapperClassName:s,childStyle:a,size:i}=t,c=Jt(t,["children","style","wrapperClassName","childStyle","size"]),{loading:h}=this.state,u=Qt(pe,s,{[`${pe}-${i}`]:i,[`${pe}-block`]:n,[`${pe}-hidden`]:!h});return se.createElement("div",Object.assign({className:u,style:r},this.getDataAttr(c)),this.renderSpin(),se.createElement("div",{className:`${pe}-children`,style:a,"x-semi-prop":"children"},n))}}gt.propTypes={size:R.oneOf(Yt.SIZE),spinning:R.bool,children:R.node,indicator:R.node,delay:R.number,tip:R.node,wrapperClassName:R.string,childStyle:R.object,style:R.object};gt.defaultProps={size:"middle",spinning:!0,children:null,indicator:null,delay:0};const Xt=/\{[^{}]+\}/g;class Zt extends Request{constructor(t,n){super(t,n);for(const r in n)r in this||(this[r]=n[r])}}function en(){return Math.random().toString(36).slice(2,11)}function tn(e){let{baseUrl:t="",fetch:n=globalThis.fetch,querySerializer:r,bodySerializer:s,headers:a,...i}={...e};t=at(t);const c=[];async function h(u,l){const{baseUrl:_,fetch:x=n,headers:p,params:L={},parseAs:b="json",querySerializer:X,bodySerializer:o=s??rn,body:z,...Q}=l||{};_&&(t=at(_));let P=typeof r=="function"?r:st(r);X&&(P=typeof X=="function"?X:st({...typeof r=="object"?r:{},...X}));const T=z===void 0?void 0:o(z),M=T===void 0||T instanceof FormData?{}:{"Content-Type":"application/json"},B={redirect:"follow",...i,...Q,body:T,headers:an(M,a,p,L.header)};let d,$,v=new Zt(sn(u,{baseUrl:t,params:L,querySerializer:P}),B);if(c.length){d=en(),$=Object.freeze({baseUrl:t,fetch:x,parseAs:b,querySerializer:P,bodySerializer:o});for(const A of c)if(A&&typeof A=="object"&&typeof A.onRequest=="function"){const C=await A.onRequest({request:v,schemaPath:u,params:L,options:$,id:d});if(C){if(!(C instanceof Request))throw new Error("onRequest: must return new Request() when modifying the request");v=C}}}let w=await x(v);if(c.length)for(let A=c.length-1;A>=0;A--){const C=c[A];if(C&&typeof C=="object"&&typeof C.onResponse=="function"){const K=await C.onResponse({request:v,response:w,schemaPath:u,params:L,options:$,id:d});if(K){if(!(K instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");w=K}}}if(w.status===204||w.headers.get("Content-Length")==="0")return w.ok?{data:{},response:w}:{error:{},response:w};if(w.ok)return b==="stream"?{data:w.body,response:w}:{data:await w[b](),response:w};let W=await w.text();try{W=JSON.parse(W)}catch{}return{error:W,response:w}}return{GET(u,l){return h(u,{...l,method:"GET"})},PUT(u,l){return h(u,{...l,method:"PUT"})},POST(u,l){return h(u,{...l,method:"POST"})},DELETE(u,l){return h(u,{...l,method:"DELETE"})},OPTIONS(u,l){return h(u,{...l,method:"OPTIONS"})},HEAD(u,l){return h(u,{...l,method:"HEAD"})},PATCH(u,l){return h(u,{...l,method:"PATCH"})},TRACE(u,l){return h(u,{...l,method:"TRACE"})},use(...u){for(const l of u)if(l){if(typeof l!="object"||!("onRequest"in l||"onResponse"in l))throw new Error("Middleware must be an object with one of `onRequest()` or `onResponse()`");c.push(l)}},eject(...u){for(const l of u){const _=c.indexOf(l);_!==-1&&c.splice(_,1)}}}}function Le(e,t,n){if(t==null)return"";if(typeof t=="object")throw new Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${e}=${(n==null?void 0:n.allowReserved)===!0?t:encodeURIComponent(t)}`}function Et(e,t,n){if(!t||typeof t!="object")return"";const r=[],s={simple:",",label:".",matrix:";"}[n.style]||"&";if(n.style!=="deepObject"&&n.explode===!1){for(const c in t)r.push(c,n.allowReserved===!0?t[c]:encodeURIComponent(t[c]));const i=r.join(",");switch(n.style){case"form":return`${e}=${i}`;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return i}}for(const i in t){const c=n.style==="deepObject"?`${e}[${i}]`:i;r.push(Le(c,t[i],n))}const a=r.join(s);return n.style==="label"||n.style==="matrix"?`${s}${a}`:a}function yt(e,t,n){if(!Array.isArray(t))return"";if(n.explode===!1){const a={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",i=(n.allowReserved===!0?t:t.map(c=>encodeURIComponent(c))).join(a);switch(n.style){case"simple":return i;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return`${e}=${i}`}}const r={simple:",",label:".",matrix:";"}[n.style]||"&",s=[];for(const a of t)n.style==="simple"||n.style==="label"?s.push(n.allowReserved===!0?a:encodeURIComponent(a)):s.push(Le(e,a,n));return n.style==="label"||n.style==="matrix"?`${r}${s.join(r)}`:s.join(r)}function st(e){return function(n){const r=[];if(n&&typeof n=="object")for(const s in n){const a=n[s];if(a!=null){if(Array.isArray(a)){r.push(yt(s,a,{style:"form",explode:!0,...e==null?void 0:e.array,allowReserved:(e==null?void 0:e.allowReserved)||!1}));continue}if(typeof a=="object"){r.push(Et(s,a,{style:"deepObject",explode:!0,...e==null?void 0:e.object,allowReserved:(e==null?void 0:e.allowReserved)||!1}));continue}r.push(Le(s,a,e))}}return r.join("&")}}function nn(e,t){let n=e;for(const r of e.match(Xt)??[]){let s=r.substring(1,r.length-1),a=!1,i="simple";if(s.endsWith("*")&&(a=!0,s=s.substring(0,s.length-1)),s.startsWith(".")?(i="label",s=s.substring(1)):s.startsWith(";")&&(i="matrix",s=s.substring(1)),!t||t[s]===void 0||t[s]===null)continue;const c=t[s];if(Array.isArray(c)){n=n.replace(r,yt(s,c,{style:i,explode:a}));continue}if(typeof c=="object"){n=n.replace(r,Et(s,c,{style:i,explode:a}));continue}if(i==="matrix"){n=n.replace(r,`;${Le(s,c)}`);continue}n=n.replace(r,i==="label"?`.${encodeURIComponent(c)}`:encodeURIComponent(c))}return n}function rn(e){return e instanceof FormData?e:JSON.stringify(e)}function sn(e,t){var s;let n=`${t.baseUrl}${e}`;(s=t.params)!=null&&s.path&&(n=nn(n,t.params.path));let r=t.querySerializer(t.params.query??{});return r.startsWith("?")&&(r=r.substring(1)),r&&(n+=`?${r}`),n}function an(...e){const t=new Headers;for(const n of e){if(!n||typeof n!="object")continue;const r=n instanceof Headers?n.entries():Object.entries(n);for(const[s,a]of r)if(a===null)t.delete(s);else if(Array.isArray(a))for(const i of a)t.append(s,i);else a!==void 0&&t.set(s,a)}return t}function at(e){return e.endsWith("/")?e.substring(0,e.length-1):e}var Rt={exports:{}},vt={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Re=E;function on(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:on,un=Re.useState,ln=Re.useEffect,fn=Re.useLayoutEffect,dn=Re.useDebugValue;function hn(e,t){var n=t(),r=un({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return fn(function(){s.value=n,s.getSnapshot=t,Pe(s)&&a({inst:s})},[e,n,t]),ln(function(){return Pe(s)&&a({inst:s}),e(function(){Pe(s)&&a({inst:s})})},[e]),dn(n),n}function Pe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cn(e,n)}catch{return!0}}function pn(e,t){return t()}var mn=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?pn:hn;vt.useSyncExternalStore=Re.useSyncExternalStore!==void 0?Re.useSyncExternalStore:mn;Rt.exports=vt;var Je=Rt.exports;const le=()=>{},U=le(),ke=Object,f=e=>e===U,J=e=>typeof e=="function",ce=(e,t)=>({...e,...t}),gn=e=>J(e.then),Oe=new WeakMap;let En=0;const Te=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let s,a;if(ke(e)===e&&!r&&n!=RegExp){if(s=Oe.get(e),s)return s;if(s=++En+"~",Oe.set(e,s),n==Array){for(s="@",a=0;a<e.length;a++)s+=Te(e[a])+",";Oe.set(e,s)}if(n==ke){s="#";const i=ke.keys(e).sort();for(;!f(a=i.pop());)f(e[a])||(s+=a+":"+Te(e[a])+",");Oe.set(e,s)}}else s=r?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return s},te=new WeakMap,je={},Ce={},Xe="undefined",Ie=typeof window!=Xe,Ge=typeof document!=Xe,yn=()=>Ie&&typeof window.requestAnimationFrame!=Xe,oe=(e,t)=>{const n=te.get(e);return[()=>!f(t)&&e.get(t)||je,r=>{if(!f(t)){const s=e.get(t);t in Ce||(Ce[t]=s),n[5](t,ce(s,r),s||je)}},n[6],()=>!f(t)&&t in Ce?Ce[t]:!f(t)&&e.get(t)||je]};let Qe=!0;const Rn=()=>Qe,[Be,Ke]=Ie&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[le,le],vn=()=>{const e=Ge&&document.visibilityState;return f(e)||e!=="hidden"},_n=e=>(Ge&&document.addEventListener("visibilitychange",e),Be("focus",e),()=>{Ge&&document.removeEventListener("visibilitychange",e),Ke("focus",e)}),bn=e=>{const t=()=>{Qe=!0,e()},n=()=>{Qe=!1};return Be("online",t),Be("offline",n),()=>{Ke("online",t),Ke("offline",n)}},wn={isOnline:Rn,isVisible:vn},Sn={initFocus:_n,initReconnect:bn},xe=!se.useId,ge=!Ie||"Deno"in window,_t=e=>yn()?window.requestAnimationFrame(e):setTimeout(e,1),me=ge?E.useEffect:E.useLayoutEffect,Fe=typeof navigator<"u"&&navigator.connection,it=!ge&&Fe&&(["slow-2g","2g"].includes(Fe.effectiveType)||Fe.saveData),Ee=e=>{if(J(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Te(e):"",[e,t]};let Dn=0;const Ae=()=>++Dn,bt=0,wt=1,St=2,Tn=3;var ae={__proto__:null,ERROR_REVALIDATE_EVENT:Tn,FOCUS_EVENT:bt,MUTATE_EVENT:St,RECONNECT_EVENT:wt};async function Ze(...e){const[t,n,r,s]=e,a=ce({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let i=a.populateCache;const c=a.rollbackOnError;let h=a.optimisticData;const u=x=>typeof c=="function"?c(x):c!==!1,l=a.throwOnError;if(J(n)){const x=n,p=[],L=t.keys();for(const b of L)!/^\$(inf|sub)\$/.test(b)&&x(t.get(b)._k)&&p.push(b);return Promise.all(p.map(_))}return _(n);async function _(x){const[p]=Ee(x);if(!p)return;const[L,b]=oe(t,p),[X,o,z,Q]=te.get(t),P=()=>{const A=X[p];return(J(a.revalidate)?a.revalidate(L().data,x):a.revalidate!==!1)&&(delete z[p],delete Q[p],A&&A[0])?A[0](St).then(()=>L().data):L().data};if(e.length<3)return P();let T=r,M;const B=Ae();o[p]=[B,0];const d=!f(h),$=L(),v=$.data,w=$._c,W=f(w)?v:w;if(d&&(h=J(h)?h(W,v):h,b({data:h,_c:W})),J(T))try{T=T(W)}catch(A){M=A}if(T&&gn(T))if(T=await T.catch(A=>{M=A}),B!==o[p][0]){if(M)throw M;return T}else M&&d&&u(M)&&(i=!0,b({data:W,_c:U}));if(i&&!M)if(J(i)){const A=i(T,W);b({data:A,error:U,_c:U})}else b({data:T,error:U,_c:U});if(o[p][1]=Ae(),Promise.resolve(P()).then(()=>{b({_c:U})}),M){if(l)throw M;return}return T}}const ot=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},On=(e,t)=>{if(!te.has(e)){const n=ce(Sn,t),r={},s=Ze.bind(U,e);let a=le;const i={},c=(l,_)=>{const x=i[l]||[];return i[l]=x,x.push(_),()=>x.splice(x.indexOf(_),1)},h=(l,_,x)=>{e.set(l,_);const p=i[l];if(p)for(const L of p)L(_,x)},u=()=>{if(!te.has(e)&&(te.set(e,[r,{},{},{},s,h,c]),!ge)){const l=n.initFocus(setTimeout.bind(U,ot.bind(U,r,bt))),_=n.initReconnect(setTimeout.bind(U,ot.bind(U,r,wt)));a=()=>{l&&l(),_&&_(),te.delete(e)}}};return u(),[e,s,u,a]}return[e,te.get(e)[4]]},Cn=(e,t,n,r,s)=>{const a=n.errorRetryCount,i=s.retryCount,c=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!f(a)&&i>a||setTimeout(r,c,s)},xn=(e,t)=>Te(e)==Te(t),[et,An]=On(new Map),Ln=ce({onLoadingSlow:le,onSuccess:le,onError:le,onErrorRetry:Cn,onDiscarded:le,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:it?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:it?5e3:3e3,compare:xn,isPaused:()=>!1,cache:et,mutate:An,fallback:{}},wn),In=(e,t)=>{const n=ce(e,t);if(t){const{use:r,fallback:s}=e,{use:a,fallback:i}=t;r&&a&&(n.use=r.concat(a)),s&&i&&(n.fallback=ce(s,i))}return n},Mn=E.createContext({}),Dt="$inf$",Tt=Ie&&window.__SWR_DEVTOOLS_USE__,Nn=Tt?window.__SWR_DEVTOOLS_USE__:[],$n=()=>{Tt&&(window.__SWR_DEVTOOLS_REACT__=se)},Ot=e=>J(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],Vn=()=>ce(Ln,E.useContext(Mn)),Pn=e=>(t,n,r)=>e(t,n&&((...a)=>{const[i]=Ee(t),[,,,c]=te.get(et);if(i.startsWith(Dt))return n(...a);const h=c[i];return f(h)?n(...a):(delete c[i],h)}),r),kn=Nn.concat(Pn),Ct=e=>function(...n){const r=Vn(),[s,a,i]=Ot(n),c=In(r,i);let h=e;const{use:u}=c,l=(u||[]).concat(kn);for(let _=l.length;_--;)h=l[_](h);return h(s,a||c.fetcher||null,c)},xt=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}},jn=(e,t)=>(...n)=>{const[r,s,a]=Ot(n),i=(a.use||[]).concat(t);return e(r,s,{...a,use:i})};$n();const ct=se.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),qe={dedupe:!0},Fn=(e,t,n)=>{const{cache:r,compare:s,suspense:a,fallbackData:i,revalidateOnMount:c,revalidateIfStale:h,refreshInterval:u,refreshWhenHidden:l,refreshWhenOffline:_,keepPreviousData:x}=n,[p,L,b,X]=te.get(r),[o,z]=Ee(e),Q=E.useRef(!1),P=E.useRef(!1),T=E.useRef(o),M=E.useRef(t),B=E.useRef(n),d=()=>B.current,$=()=>d().isVisible()&&d().isOnline(),[v,w,W,A]=oe(r,o),C=E.useRef({}).current,K=f(i)?n.fallback[o]:i,ne=(m,g)=>{for(const D in C){const y=D;if(y==="data"){if(!s(m[y],g[y])&&(!f(m[y])||!s(re,g[y])))return!1}else if(g[y]!==m[y])return!1}return!0},k=E.useMemo(()=>{const m=!o||!t?!1:f(c)?d().isPaused()||a?!1:f(h)?!0:h:c,g=O=>{const F=ce(O);return delete F._k,m?{isValidating:!0,isLoading:!0,...F}:F},D=v(),y=A(),V=g(D),Y=D===y?V:g(y);let S=V;return[()=>{const O=g(v());return ne(O,S)?(S.data=O.data,S.isLoading=O.isLoading,S.isValidating=O.isValidating,S.error=O.error,S):(S=O,O)},()=>Y]},[r,o]),j=Je.useSyncExternalStore(E.useCallback(m=>W(o,(g,D)=>{ne(D,g)||m()}),[r,o]),k[0],k[1]),ie=!Q.current,ve=p[o]&&p[o].length>0,H=j.data,N=f(H)?K:H,Z=j.error,ue=E.useRef(N),re=x?f(H)?ue.current:H:N,fe=ve&&!f(Z)?!1:ie&&!f(c)?c:d().isPaused()?!1:a?f(N)?!1:h:f(N)||h,_e=!!(o&&t&&ie&&fe),Ne=f(j.isValidating)?_e:j.isValidating,$e=f(j.isLoading)?_e:j.isLoading,ee=E.useCallback(async m=>{const g=M.current;if(!o||!g||P.current||d().isPaused())return!1;let D,y,V=!0;const Y=m||{},S=!b[o]||!Y.dedupe,O=()=>xe?!P.current&&o===T.current&&Q.current:o===T.current,F={isValidating:!1,isLoading:!1},we=()=>{w(F)},Se=()=>{const I=b[o];I&&I[1]===y&&delete b[o]},De={isValidating:!0};f(v().data)&&(De.isLoading=!0);try{if(S&&(w(De),n.loadingTimeout&&f(v().data)&&setTimeout(()=>{V&&O()&&d().onLoadingSlow(o,n)},n.loadingTimeout),b[o]=[g(z),Ae()]),[D,y]=b[o],D=await D,S&&setTimeout(Se,n.dedupingInterval),!b[o]||b[o][1]!==y)return S&&O()&&d().onDiscarded(o),!1;F.error=U;const I=L[o];if(!f(I)&&(y<=I[0]||y<=I[1]||I[1]===0))return we(),S&&O()&&d().onDiscarded(o),!1;const q=v().data;F.data=s(q,D)?q:D,S&&O()&&d().onSuccess(D,o,n)}catch(I){Se();const q=d(),{shouldRetryOnError:de}=q;q.isPaused()||(F.error=I,S&&O()&&(q.onError(I,o,q),(de===!0||J(de)&&de(I))&&(!d().revalidateOnFocus||!d().revalidateOnReconnect||$())&&q.onErrorRetry(I,o,q,Ve=>{const he=p[o];he&&he[0]&&he[0](ae.ERROR_REVALIDATE_EVENT,Ve)},{retryCount:(Y.retryCount||0)+1,dedupe:!0})))}return V=!1,we(),!0},[o,r]),be=E.useCallback((...m)=>Ze(r,T.current,...m),[]);if(me(()=>{M.current=t,B.current=n,f(H)||(ue.current=H)}),me(()=>{if(!o)return;const m=ee.bind(U,qe);let g=0;const y=xt(o,p,(V,Y={})=>{if(V==ae.FOCUS_EVENT){const S=Date.now();d().revalidateOnFocus&&S>g&&$()&&(g=S+d().focusThrottleInterval,m())}else if(V==ae.RECONNECT_EVENT)d().revalidateOnReconnect&&$()&&m();else{if(V==ae.MUTATE_EVENT)return ee();if(V==ae.ERROR_REVALIDATE_EVENT)return ee(Y)}});return P.current=!1,T.current=o,Q.current=!0,w({_k:z}),fe&&(f(N)||ge?m():_t(m)),()=>{P.current=!0,y()}},[o]),me(()=>{let m;function g(){const y=J(u)?u(v().data):u;y&&m!==-1&&(m=setTimeout(D,y))}function D(){!v().error&&(l||d().isVisible())&&(_||d().isOnline())?ee(qe).then(g):g()}return g(),()=>{m&&(clearTimeout(m),m=-1)}},[u,l,_,o]),E.useDebugValue(re),a&&f(N)&&o){if(!xe&&ge)throw new Error("Fallback data is required when using suspense in SSR.");M.current=t,B.current=n,P.current=!1;const m=X[o];if(!f(m)){const g=be(m);ct(g)}if(f(Z)){const g=ee(qe);f(re)||(g.status="fulfilled",g.value=!0),ct(g)}else throw Z}return{mutate:be,get data(){return C.data=!0,re},get error(){return C.error=!0,Z},get isValidating(){return C.isValidating=!0,Ne},get isLoading(){return C.isLoading=!0,$e}}},At=Ct(Fn),ut=se.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),Ue={dedupe:!0},qn=(e,t,n)=>{const{cache:r,compare:s,suspense:a,fallbackData:i,revalidateOnMount:c,revalidateIfStale:h,refreshInterval:u,refreshWhenHidden:l,refreshWhenOffline:_,keepPreviousData:x}=n,[p,L,b,X]=te.get(r),[o,z]=Ee(e),Q=E.useRef(!1),P=E.useRef(!1),T=E.useRef(o),M=E.useRef(t),B=E.useRef(n),d=()=>B.current,$=()=>d().isVisible()&&d().isOnline(),[v,w,W,A]=oe(r,o),C=E.useRef({}).current,K=f(i)?n.fallback[o]:i,ne=(m,g)=>{for(const D in C){const y=D;if(y==="data"){if(!s(m[y],g[y])&&(!f(m[y])||!s(re,g[y])))return!1}else if(g[y]!==m[y])return!1}return!0},k=E.useMemo(()=>{const m=!o||!t?!1:f(c)?d().isPaused()||a?!1:f(h)?!0:h:c,g=O=>{const F=ce(O);return delete F._k,m?{isValidating:!0,isLoading:!0,...F}:F},D=v(),y=A(),V=g(D),Y=D===y?V:g(y);let S=V;return[()=>{const O=g(v());return ne(O,S)?(S.data=O.data,S.isLoading=O.isLoading,S.isValidating=O.isValidating,S.error=O.error,S):(S=O,O)},()=>Y]},[r,o]),j=Je.useSyncExternalStore(E.useCallback(m=>W(o,(g,D)=>{ne(D,g)||m()}),[r,o]),k[0],k[1]),ie=!Q.current,ve=p[o]&&p[o].length>0,H=j.data,N=f(H)?K:H,Z=j.error,ue=E.useRef(N),re=x?f(H)?ue.current:H:N,fe=ve&&!f(Z)?!1:ie&&!f(c)?c:d().isPaused()?!1:a?f(N)?!1:h:f(N)||h,_e=!!(o&&t&&ie&&fe),Ne=f(j.isValidating)?_e:j.isValidating,$e=f(j.isLoading)?_e:j.isLoading,ee=E.useCallback(async m=>{const g=M.current;if(!o||!g||P.current||d().isPaused())return!1;let D,y,V=!0;const Y=m||{},S=!b[o]||!Y.dedupe,O=()=>xe?!P.current&&o===T.current&&Q.current:o===T.current,F={isValidating:!1,isLoading:!1},we=()=>{w(F)},Se=()=>{const I=b[o];I&&I[1]===y&&delete b[o]},De={isValidating:!0};f(v().data)&&(De.isLoading=!0);try{if(S&&(w(De),n.loadingTimeout&&f(v().data)&&setTimeout(()=>{V&&O()&&d().onLoadingSlow(o,n)},n.loadingTimeout),b[o]=[g(z),Ae()]),[D,y]=b[o],D=await D,S&&setTimeout(Se,n.dedupingInterval),!b[o]||b[o][1]!==y)return S&&O()&&d().onDiscarded(o),!1;F.error=U;const I=L[o];if(!f(I)&&(y<=I[0]||y<=I[1]||I[1]===0))return we(),S&&O()&&d().onDiscarded(o),!1;const q=v().data;F.data=s(q,D)?q:D,S&&O()&&d().onSuccess(D,o,n)}catch(I){Se();const q=d(),{shouldRetryOnError:de}=q;q.isPaused()||(F.error=I,S&&O()&&(q.onError(I,o,q),(de===!0||J(de)&&de(I))&&(!d().revalidateOnFocus||!d().revalidateOnReconnect||$())&&q.onErrorRetry(I,o,q,Ve=>{const he=p[o];he&&he[0]&&he[0](ae.ERROR_REVALIDATE_EVENT,Ve)},{retryCount:(Y.retryCount||0)+1,dedupe:!0})))}return V=!1,we(),!0},[o,r]),be=E.useCallback((...m)=>Ze(r,T.current,...m),[]);if(me(()=>{M.current=t,B.current=n,f(H)||(ue.current=H)}),me(()=>{if(!o)return;const m=ee.bind(U,Ue);let g=0;const y=xt(o,p,(V,Y={})=>{if(V==ae.FOCUS_EVENT){const S=Date.now();d().revalidateOnFocus&&S>g&&$()&&(g=S+d().focusThrottleInterval,m())}else if(V==ae.RECONNECT_EVENT)d().revalidateOnReconnect&&$()&&m();else{if(V==ae.MUTATE_EVENT)return ee();if(V==ae.ERROR_REVALIDATE_EVENT)return ee(Y)}});return P.current=!1,T.current=o,Q.current=!0,w({_k:z}),fe&&(f(N)||ge?m():_t(m)),()=>{P.current=!0,y()}},[o]),me(()=>{let m;function g(){const y=J(u)?u(v().data):u;y&&m!==-1&&(m=setTimeout(D,y))}function D(){!v().error&&(l||d().isVisible())&&(_||d().isOnline())?ee(Ue).then(g):g()}return g(),()=>{m&&(clearTimeout(m),m=-1)}},[u,l,_,o]),E.useDebugValue(re),a&&f(N)&&o){if(!xe&&ge)throw new Error("Fallback data is required when using suspense in SSR.");M.current=t,B.current=n,P.current=!1;const m=X[o];if(!f(m)){const g=be(m);ut(g)}if(f(Z)){const g=ee(Ue);f(re)||(g.status="fulfilled",g.value=!0),ut(g)}else throw Z}return{mutate:be,get data(){return C.data=!0,re},get error(){return C.error=!0,Z},get isValidating(){return C.isValidating=!0,Ne},get isLoading(){return C.isLoading=!0,$e}}},Un=Ct(qn),zn=e=>Ee(e?e(0,null):null)[0],ze=Promise.resolve(),Wn=e=>(t,n,r)=>{const s=E.useRef(!1),{cache:a,initialSize:i=1,revalidateAll:c=!1,persistSize:h=!1,revalidateFirstPage:u=!0,revalidateOnMount:l=!1,parallel:_=!1}=r,[,,,x]=te.get(et);let p;try{p=zn(t),p&&(p=Dt+p)}catch{}const[L,b,X]=oe(a,p),o=E.useCallback(()=>f(L()._l)?i:L()._l,[a,p,i]);Je.useSyncExternalStore(E.useCallback(d=>p?X(p,()=>{d()}):()=>{},[a,p]),o,o);const z=E.useCallback(()=>{const d=L()._l;return f(d)?i:d},[p,i]),Q=E.useRef(z());me(()=>{if(!s.current){s.current=!0;return}p&&b({_l:h?Q.current:z()})},[p,a]);const P=l&&!s.current,T=e(p,async d=>{const $=L()._i,v=L()._r;b({_r:U});const w=[],W=z(),[A]=oe(a,d),C=A().data,K=[];let ne=null;for(let k=0;k<W;++k){const[j,ie]=Ee(t(k,_?null:ne));if(!j)break;const[ve,H]=oe(a,j);let N=ve().data;const Z=c||$||f(N)||u&&!k&&!f(C)||P||C&&!f(C[k])&&!r.compare(C[k],N);if(n&&(typeof v=="function"?v(N,ie):Z)){const ue=async()=>{if(!(j in x))N=await n(ie);else{const fe=x[j];delete x[j],N=await fe}H({data:N,_k:ie}),w[k]=N};_?K.push(ue):await ue()}else w[k]=N;_||(ne=N)}return _&&await Promise.all(K.map(k=>k())),b({_i:U}),w},r),M=E.useCallback(function(d,$){const v=typeof $=="boolean"?{revalidate:$}:$||{},w=v.revalidate!==!1;return p?(w&&(f(d)?b({_i:!0,_r:v.revalidate}):b({_i:!1,_r:v.revalidate})),arguments.length?T.mutate(d,{...v,revalidate:w}):T.mutate()):ze},[p,a]),B=E.useCallback(d=>{if(!p)return ze;const[,$]=oe(a,p);let v;if(J(d)?v=d(z()):typeof d=="number"&&(v=d),typeof v!="number")return ze;$({_l:v}),Q.current=v;const w=[],[W]=oe(a,p);let A=null;for(let C=0;C<v;++C){const[K]=Ee(t(C,A)),[ne]=oe(a,K),k=K?ne().data:U;if(f(k))return M(W().data);w.push(k),A=k}return M(w)},[p,a,M,z]);return{size:z(),setSize:B,mutate:M,get data(){return T.data},get error(){return T.error},get isValidating(){return T.isValidating},get isLoading(){return T.isLoading}}},Lt=jn(Un,Wn);var tt={};tt.match=Yn;tt.parse=It;var Hn=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,Gn=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,Qn=/^(?:(min|max)-)?(.+)/,Bn=/(em|rem|px|cm|mm|in|pt|pc)?$/,Kn=/(dpi|dpcm|dppx)?$/;function Yn(e,t){return It(e).some(function(n){var r=n.inverse,s=n.type==="all"||t.type===n.type;if(s&&r||!(s||r))return!1;var a=n.expressions.every(function(i){var c=i.feature,h=i.modifier,u=i.value,l=t[c];if(!l)return!1;switch(c){case"orientation":case"scan":return l.toLowerCase()===u.toLowerCase();case"width":case"height":case"device-width":case"device-height":u=dt(u),l=dt(l);break;case"resolution":u=ft(u),l=ft(l);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":u=lt(u),l=lt(l);break;case"grid":case"color":case"color-index":case"monochrome":u=parseInt(u,10)||1,l=parseInt(l,10)||0;break}switch(h){case"min":return l>=u;case"max":return l<=u;default:return l===u}});return a&&!r||!a&&r})}function It(e){return e.split(",").map(function(t){t=t.trim();var n=t.match(Hn),r=n[1],s=n[2],a=n[3]||"",i={};return i.inverse=!!r&&r.toLowerCase()==="not",i.type=s?s.toLowerCase():"all",a=a.match(/\([^\)]+\)/g)||[],i.expressions=a.map(function(c){var h=c.match(Gn),u=h[1].toLowerCase().match(Qn);return{modifier:u[1],feature:u[2],value:h[2]}}),i})}function lt(e){var t=Number(e),n;return t||(n=e.match(/^(\d+)\s*\/\s*(\d+)$/),t=n[1]/n[2]),t}function ft(e){var t=parseFloat(e),n=String(e).match(Kn)[1];switch(n){case"dpcm":return t/2.54;case"dppx":return t*96;default:return t}}function dt(e){var t=parseFloat(e),n=String(e).match(Bn)[1];switch(n){case"em":return t*16;case"rem":return t*16;case"cm":return t*96/2.54;case"mm":return t*96/2.54/10;case"in":return t*96;case"pt":return t*72;case"pc":return t*72/12;default:return t}}var Jn=tt.match,ht=typeof window<"u"?window.matchMedia:null;function Xn(e,t,n){var r=this,s;ht&&!n&&(s=ht.call(window,e)),s?(this.matches=s.matches,this.media=s.media,s.addListener(c)):(this.matches=Jn(e,t),this.media=e),this.addListener=a,this.removeListener=i,this.dispose=h;function a(u){s&&s.addListener(u)}function i(u){s&&s.removeListener(u)}function c(u){r.matches=u.matches,r.media=u.media}function h(){s&&s.removeListener(c)}}function Zn(e,t,n){return new Xn(e,t,n)}var er=Zn;const tr=Ut(er);var nr=/[A-Z]/g,rr=/^ms-/,We={};function sr(e){return"-"+e.toLowerCase()}function Mt(e){if(We.hasOwnProperty(e))return We[e];var t=e.replace(nr,sr);return We[e]=rr.test(t)?"-"+t:t}function ar(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),s=n.length;if(r.length!==s)return!1;for(let a=0;a<s;a++){const i=n[a];if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1}return!0}const G=R.oneOfType([R.string,R.number]),nt={all:R.bool,grid:R.bool,aural:R.bool,braille:R.bool,handheld:R.bool,print:R.bool,projection:R.bool,screen:R.bool,tty:R.bool,tv:R.bool,embossed:R.bool},Nt={orientation:R.oneOf(["portrait","landscape"]),scan:R.oneOf(["progressive","interlace"]),aspectRatio:R.string,deviceAspectRatio:R.string,height:G,deviceHeight:G,width:G,deviceWidth:G,color:R.bool,colorIndex:R.bool,monochrome:R.bool,resolution:G,type:Object.keys(nt)},{type:Mr,...ir}=Nt,$t={minAspectRatio:R.string,maxAspectRatio:R.string,minDeviceAspectRatio:R.string,maxDeviceAspectRatio:R.string,minHeight:G,maxHeight:G,minDeviceHeight:G,maxDeviceHeight:G,minWidth:G,maxWidth:G,minDeviceWidth:G,maxDeviceWidth:G,minColor:R.number,maxColor:R.number,minColorIndex:R.number,maxColorIndex:R.number,minMonochrome:R.number,maxMonochrome:R.number,minResolution:G,maxResolution:G,...ir},or={...nt,...$t};var cr={all:or,types:nt,matchers:Nt,features:$t};const ur=e=>`not ${e}`,lr=(e,t)=>{const n=Mt(e);return typeof t=="number"&&(t=`${t}px`),t===!0?n:t===!1?ur(n):`(${n}: ${t})`},fr=e=>e.join(" and "),dr=e=>{const t=[];return Object.keys(cr.all).forEach(n=>{const r=e[n];r!=null&&t.push(lr(n,r))}),fr(t)},hr=E.createContext(void 0),pr=e=>e.query||dr(e),pt=e=>e?Object.keys(e).reduce((n,r)=>(n[Mt(r)]=e[r],n),{}):void 0,Vt=()=>{const e=E.useRef(!1);return E.useEffect(()=>{e.current=!0},[]),e.current},mr=e=>{const t=E.useContext(hr),n=()=>pt(e)||pt(t),[r,s]=E.useState(n);return E.useEffect(()=>{const a=n();ar(r,a)||s(a)},[e,t]),r},gr=e=>{const t=()=>pr(e),[n,r]=E.useState(t);return E.useEffect(()=>{const s=t();n!==s&&r(s)},[e]),n},Er=(e,t)=>{const n=()=>tr(e,t||{},!!t),[r,s]=E.useState(n),a=Vt();return E.useEffect(()=>{if(a){const i=n();return s(i),()=>{i&&i.dispose()}}},[e,t]),r},yr=e=>{const[t,n]=E.useState(e.matches);return E.useEffect(()=>{const r=s=>{n(s.matches)};return e.addListener(r),n(e.matches),()=>{e.removeListener(r)}},[e]),t},Pt=(e,t,n)=>{const r=mr(t),s=gr(e);if(!s)throw new Error("Invalid or missing MediaQuery!");const a=Er(s,r),i=yr(a),c=Vt();return E.useEffect(()=>{c&&n&&n(i)},[i]),E.useEffect(()=>()=>{a&&a.dispose()},[]),i},Nr=e=>new Date(Number.parseInt(e.substring(0,8),16)*1e3),Rr=e=>({...e,id:e._id.$oid,episode:e.elements.EpisodeNumber,pub_date:e.pub_date?new Date(e.pub_date):null,elements:e.elements}),vr=e=>{var l,_,x,p,L;const t=e._id.$oid,n=_r(e),r=e.begin?new Date(e.begin).getFullYear():null,s=mt((l=e.tv)==null?void 0:l.poster_path),a=mt((_=e.tv)==null?void 0:_.backdrop_path),i=e.season_override??(e.season?{name:e.season.name,number:e.season.season_number}:null),c=[];i&&c.push({content:`第 ${i.number.toString()} 季`,tooltip:i.name});const h=e.broadcast?wr(e.broadcast):{};h.begin&&c.push({content:Sr(h)}),(x=e.tv)!=null&&x.vote_average&&c.push({tooltip:`共${e.tv.vote_count}票`,content:`${((p=e.tv)==null?void 0:p.vote_average).toFixed(1)}/10`});const u=(L=e.tv)==null?void 0:L.overview;return{...e,info:c,id:t,title:n,year:r,poster:s,backdrop:a,season:i,overview:u}},mt=e=>e?`https://image.tmdb.org/t/p/original/${e}`:null,_r=e=>{var n,r,s;const t=e.title_translate;return((n=t==null?void 0:t["zh-Hans"])==null?void 0:n[0])??((r=t==null?void 0:t["zh-Hant"])==null?void 0:r[0])??((s=e.tv)==null?void 0:s.original_name)??e.title},br=/R\/([^/]*)\/P([017][DM])/i,wr=e=>{const t=br.exec(e);return t?{begin:new Date(t[1]),type:t[2]}:{}},Sr=({begin:e,type:t})=>!e||!t?"":t==="0D"?e.toLocaleString():t==="1D"?`每天 ${He(e)}`:t==="7D"?`每周${Dr(e)} ${He(e)}`:t==="1M"?`每月${e.getDate()}日 ${He(e)}`:"",Dr=e=>{const t=typeof e=="string"?Number(e):typeof e=="number"?e:e.getDay();return["日","一","二","三","四","五","六"][t]},He=e=>{const t=e.getHours(),n=e.getMinutes();return`${t}:${n.toString().padStart(2,"0")}`},$r=(e,t)=>{const n=new Date().getDay();if(e===t)return 0;const r=e>=n?e-n:e+7-n,s=t>=n?t-n:t+7-n;return r-s},Vr=()=>Pt({query:"(max-width: 520px)"}),Pr=()=>Pt({query:"(min-width: 1000px)"}),kr=e=>{const t=p=>p.toString().padStart(2,"0"),r=new Date().getTime()/1e3,s=e.getTime()/1e3,a=r-s;if(a<60)return"刚刚";const i=60,c=60*60,h=24*c,u=31*h;if(a<c)return`${Math.floor(a/i)} 分钟前`;if(a<h)return`${Math.floor(a/c)} 小时前`;if(a<u)return`${Math.floor(a/h)} 天前`;const l=e.getFullYear(),_=e.getMonth()+1,x=e.getDate();return`${l}-${t(_)}-${t(x)}`},kt=e=>"Backwards"in e?e.Backwards:e.Forward,jt=e=>e,Ft=(e,t)=>e.data!==void 0?{isLoading:!1,error:null,data:t(e.data)}:e,ye=()=>tn({baseUrl:"/api"}),Tr=e=>(t,n)=>t===0?[e]:n.page_info.has_next_page?[e,kt(n.page_info.end_cursor)]:null,Me=e=>{if(e.error)throw e.error;return e.data};function qt(e,t){return()=>Lt(Tr(e),n=>t(n).then(Me))}const Or=(e,t)=>(n,r)=>n===0?[t,e]:r.page_info.has_next_page?[t,e,kt(r.page_info.end_cursor)]:null;function Cr(e,t){return n=>Lt(Or(n,e),r=>t(r).then(Me))}function rt(e,t){return n=>jt(At([e,n],([,r])=>t(r).then(Me)))}const xr=rt("meta",e=>ye().GET("/meta/{id}",{params:{path:{id:e}}})),jr=rt("meta-group",e=>ye().GET("/meta/{id}/group",{params:{path:{id:e}}})),Fr=Cr("meta-entry",([,e,t])=>ye().GET("/meta/{id}/entry",{params:{path:{id:e},query:{cursor:t}}})),qr=(e,t)=>jt(At(["season",e,t],()=>ye().GET("/meta/season",{params:{query:{year:e,season:t}}}).then(Me))),Ur=e=>Ft(xr(e),vr),zr=e=>Ft(Ar(e),Rr),Wr=qt("download",([,e])=>ye().GET("/download",{params:{query:{cursor:e}}})),Ar=rt("entry",e=>ye().GET("/entry/{id}",{params:{path:{id:e}}})),Hr=qt("entry",([,e])=>ye().GET("/entry",{params:{query:{cursor:e}}}));export{gt as S,Hr as a,zr as b,Vr as c,Ur as d,Rr as e,kr as f,Nr as g,Pr as h,Fr as i,Sr as j,ye as k,_r as l,qr as m,Dr as n,jr as o,wr as p,$r as s,Wr as u};
